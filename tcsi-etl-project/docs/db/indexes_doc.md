# TCSI Extract Database – Index Documentation

This document provides details of indexes implemented on the TCSI Extract database schema to optimize performance for**reporting, KPI analysis, forecasting**, and **frequent queries**. Primary Key (PK) indexes are automatically created by PostgreSQL and are not repeated here.

### 1. Student Related Tables

| Index Name                                      | Table                                   | Columns    | Purpose / Justification                                                                           | Example Usage                                                                                                                                                                          |
| ----------------------------------------------- | --------------------------------------- | ---------- | ------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `idx_student_citizenships_student_id`           | hep_student_citizenships                | student_id | Supports joins from students to citizenships, commonly used in reporting and demographic analysis | `SELECT s.e313_student_identification_code, c.e358_citizen_resident_code FROM hep_students s JOIN hep_student_citizenships c ON s.student_id = c.student_id;`                          |
| `idx_student_disabilities_student_id`           | hep_student_disabilities                | student_id | Supports joins for student disability reporting                                                   | `SELECT s.e313_student_identification_code, d.e615_disability_code FROM hep_students s JOIN hep_student_disabilities d ON s.student_id = d.student_id;`                                |
| `idx_student_contacts_first_address_student_id` | student_contacts_first_reported_address | student_id | Supports reporting on first reported addresses                                                    | `SELECT s.e313_student_identification_code, a.e787_first_residential_address_line1 FROM hep_students s JOIN student_contacts_first_reported_address a ON s.student_id = a.student_id;` |
| `idx_commonwealth_scholarships_student_id`      | commonwealth_scholarships               | student_id | Supports joins for scholarship reporting and financial KPI                                        | `SELECT s.e313_student_identification_code, cs.e545_commonwealth_scholarship_type FROM hep_students s JOIN commonwealth_scholarships cs ON s.student_id = cs.student_id;`              |
| `idx_hep_students_is_current`                   | hep_students                            | is_current | Optimizes filtering for active/current students in KPI queries                                    | `SELECT COUNT(*) FROM hep_students WHERE is_current = TRUE;`                                                                                                                           |
### 2. Course Related Tables

| Index Name                              | Table                      | Columns                       | Purpose / Justification                               | Example Usage                                                                                                                                                                |
| --------------------------------------- | -------------------------- | ----------------------------- | ----------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `idx_hep_courses_course_of_study`       | hep_courses                | uid3_courses_of_study_res_key | Supports joins from specific courses to course types  | `SELECT c.e308_course_name, cs.e394_course_of_study_name FROM hep_courses c JOIN courses_of_study cs ON c.uid3_courses_of_study_res_key = cs.uid3_courses_of_study_res_key;` |
| `idx_special_interest_courses_course`   | special_interest_courses   | uid5_courses_res_key          | Supports reporting on special interest courses        | `SELECT c.e308_course_name, sic.e312_special_course_type FROM hep_courses c JOIN special_interest_courses sic ON c.uid5_courses_res_key = sic.uid5_courses_res_key;`         |
| `idx_course_fields_of_education_course` | course_fields_of_education | uid5_courses_res_key          | Supports course-level reporting by field of education | `SELECT c.e308_course_name, fe.e461_field_of_education_code FROM hep_courses c JOIN course_fields_of_education fe ON c.uid5_courses_res_key = fe.uid5_courses_res_key;`      |

### 3. Course Admission Related Tables

| Index Name                                 | Table                 | Columns                                | Purpose / Justification                                   | Example Usage                                                                                                                                                                                |
| ------------------------------------------ | --------------------- | -------------------------------------- | --------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `idx_hep_course_admissions_student`        | hep_course_admissions | student_id                             | Optimizes joins for student admission reports             | `SELECT s.e313_student_identification_code, ca.e534_course_of_study_commencement_date FROM hep_students s JOIN hep_course_admissions ca ON s.student_id = ca.student_id;`                    |
| `idx_hep_course_admissions_course`         | hep_course_admissions | uid5_courses_res_key                   | Optimizes reporting per course                            | `SELECT c.e308_course_name, COUNT(ca.course_admission_id) FROM hep_courses c JOIN hep_course_admissions ca ON c.uid5_courses_res_key = ca.uid5_courses_res_key GROUP BY c.e308_course_name;` |
| `idx_hep_course_admissions_is_current`     | hep_course_admissions | is_current                             | Filters active/current admissions efficiently             | `SELECT COUNT(*) FROM hep_course_admissions WHERE is_current = TRUE;`                                                                                                                        |
| `idx_hep_course_admissions_course_outcome` | hep_course_admissions | e599_CourseOutcomeCode                 | Supports KPI analysis by course outcome                   | `SELECT e599_CourseOutcomeCode, COUNT(*) FROM hep_course_admissions GROUP BY e599_CourseOutcomeCode;`                                                                                        |
| `idx_hep_course_admissions_commencement`   | hep_course_admissions | e534_course_of_study_commencement_date | Supports time-series analysis for forecasting enrollments | `SELECT EXTRACT(YEAR FROM e534_course_of_study_commencement_date) AS year, COUNT(*) FROM hep_course_admissions GROUP BY year;`                                                               |

### 4. Scholarships and Student Loans

| Index Name                              | Table            | Columns                   | Purpose / Justification                               | Example Usage                                                                                                                                                                            |
| --------------------------------------- | ---------------- | ------------------------- | ----------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `idx_rtp_scholarships_course_admission` | rtp_scholarships | course_admission_id       | Supports join for scholarship reporting per admission | `SELECT ca.e534_course_of_study_commencement_date, r.e487_rtp_scholarship_type FROM hep_course_admissions ca JOIN rtp_scholarships r ON ca.course_admission_id = r.course_admission_id;` |
| `idx_rtp_scholarships_type`             | rtp_scholarships | e487_rtp_scholarship_type | Filter scholarships by type for KPI                   | `SELECT e487_rtp_scholarship_type, COUNT(*) FROM rtp_scholarships GROUP BY e487_rtp_scholarship_type;`                                                                                   |
| `idx_oshelp_course_admission`           | oshelp           | course_admission_id       | Join for OS-HELP loan reporting per course admission  | `SELECT ca.e534_course_of_study_commencement_date, o.e528_payment_amount FROM hep_course_admissions ca JOIN oshelp o ON ca.course_admission_id = o.course_admission_id;`                 |
| `idx_oshelp_status`                     | oshelp           | e490_student_status_code  | Filter OS-HELP loans by status                        | `SELECT e490_student_status_code, COUNT(*) FROM oshelp GROUP BY e490_student_status_code;`                                                                                               |
| `idx_sahelp_student`                    | sahelp           | student_id                | Join for SA-HELP loan reporting per student           | `SELECT s.e313_student_identification_code, sh.e558_help_loan_amount FROM hep_students s JOIN sahelp sh ON s.student_id = sh.student_id;`                                                |
| `idx_sahelp_status`                     | sahelp           | e490_student_status_code  | Filter SA-HELP loans by student status                | `SELECT e490_student_status_code, SUM(e558_help_loan_amount) FROM sahelp GROUP BY e490_student_status_code;`                                                                             |
### 5. Awards Tables

| Index Name                         | Table             | Columns                  | Purpose / Justification                          | Example Usage                                                                                                                                                                         |
| ---------------------------------- | ----------------- | ------------------------ | ------------------------------------------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `idx_aggregated_awards_student`    | aggregated_awards | student_id               | Join student info for aggregated award reporting | `SELECT s.e313_student_identification_code, COUNT(*) FROM aggregated_awards a JOIN hep_students s ON a.student_id = s.student_id GROUP BY s.e313_student_identification_code;`        |
| `idx_aggregated_awards_course`     | aggregated_awards | uid5_courses_res_key     | Report awards per course                         | `SELECT c.e308_course_name, COUNT(*) FROM aggregated_awards a JOIN hep_courses c ON a.uid5_courses_res_key = c.uid5_courses_res_key GROUP BY c.e308_course_name;`                     |
| `idx_aggregated_awards_outcome`    | aggregated_awards | e599_course_outcome_code | Report awards by outcome code                    | `SELECT e599_course_outcome_code, COUNT(*) FROM aggregated_awards GROUP BY e599_course_outcome_code;`                                                                                 |
| `idx_exit_awards_course_admission` | exit_awards       | course_admission_id      | Join for exit award reporting                    | `SELECT ca.e534_course_of_study_commencement_date, ea.e599_course_outcome_code FROM hep_course_admissions ca JOIN exit_awards ea ON ca.course_admission_id = ea.course_admission_id;` |

### 6. Campus and Fees

| Index Name                                      | Table                   | Columns                        | Purpose / Justification                            | Example Usage                                                                                                                                                                                                            |
| ----------------------------------------------- | ----------------------- | ------------------------------ | -------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| `idx_hep_courses_on_campuses_course`            | hep_courses_on_campuses | uid5_courses_res_key           | Reporting on courses offered per campus            | `SELECT c.e308_course_name, hc.e525_campus_suburb FROM hep_courses c JOIN hep_courses_on_campuses hc ON c.uid5_courses_res_key = hc.uid5_courses_res_key;`                                                               |
| `idx_hep_courses_on_campuses_campus`            | hep_courses_on_campuses | uid2_campuses_res_key          | Reporting by campus                                | `SELECT hc.e525_campus_suburb, COUNT(*) FROM hep_courses_on_campuses hc GROUP BY hc.e525_campus_suburb;`                                                                                                                 |
| `idx_campus_course_fees_itsp_courses_on_campus` | campus_course_fees_itsp | uid4_courses_on_campus_res_key | Reporting student contributions/tuition per campus | `SELECT ccf.e495_indicative_student_contribution_csp, hc.e525_campus_suburb FROM campus_course_fees_itsp ccf JOIN hep_courses_on_campuses hc ON ccf.uid4_courses_on_campus_res_key = hc.uid4_courses_on_campus_res_key;` |

### 7. Unit Enrollments and AOUs

| Index Name                                | Table                | Columns             | Purpose / Justification                                  | Example Usage                                                                                                                                                                      |
| ----------------------------------------- | -------------------- | ------------------- | -------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `idx_unit_enrolments_course_admission`    | unit_enrolments      | course_admission_id | Join unit enrolments with course admission for reporting | `SELECT ue.unit_enrolment_id, ca.e534_course_of_study_commencement_date FROM unit_enrolments ue JOIN hep_course_admissions ca ON ue.course_admission_id = ca.course_admission_id;` |
| `idx_unit_enrolments_reporting_year`      | unit_enrolments      | reporting_year      | Reporting KPIs per year                                  | `SELECT reporting_year, COUNT(*) FROM unit_enrolments GROUP BY reporting_year;`                                                                                                    |
| `idx_unit_enrolments_aous_unit_enrolment` | unit_enrolments_aous | unit_enrolment_id   | Join for AOU-related reporting                           | `SELECT aou.aou_e384_amount_charged, ue.e355_unit_of_study_status_code FROM unit_enrolments_aous aou JOIN unit_enrolments ue ON aou.unit_enrolment_id = ue.unit_enrolment_id;`     |

---
**Notes**

- PK indexes are automatically created by PostgreSQL and not included.
- Composite indexes can be added later if reporting queries frequently filter on multiple columns together.
- This index strategy balances query performance and storage efficiency for KPI, forecasting, and reporting workloads.

---

**Document Version:** 1.0  
**Prepared by:** *Group 3 – CITS5206 2025 Semester 2*  
**Date:** *October 2025*